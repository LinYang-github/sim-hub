# SimHub 待办事项与进阶计划 (TODO & Roadmap)

本项目旨在建立一个高性能、全嵌入式的仿真资源管理平台。以下是当前已识别的关键技术演进方向：

## 1. 核心治理：资源版本与依赖管理 (高优先级)

为了确保仿真环境的可重复性和资源的一致性，需引入类似软件版本管理的治理机制。

### 1.1 资源版本化 (Versioning)
- [x] **语义化版本 (SemVer)**：实现 `vM.m.p` 格式的版本标记，用于识别不兼容变更。
- [x] **生命周期流转**：已实现智能感知状态流转（PENDING -> ACTIVE），支持无 Handler 资源秒级即插即用。
- [x] **快照与回溯**：支持对特定版本的物理资产（Minio 路径）进行冻结，防止覆盖历史实验数据。 (通过多版本共存实现)
- [x] **版本回溯**：支持一键将历史版本设为主版本，重定向 `latest` 指针。
- [ ] **版本比对 (Diff)**：
  - [ ] **元数据比对**：通过 JSON Diff 直观展示相邻版本间的 MetaData 变更。
  - [ ] **物理清单比对**：针对 FOLDER 类型资源，对比文件树增删改情况。
  - [ ] **轻量化可视化比对**：支持图片拉力条、PDF 并排阅读等特定组件。

### 1.2 资源间依赖管理 (Dependency Management)
- [x] **依赖项建模**：新增依赖关联表，记录资源版本间的强关联。
- [x] **版本约束支持**：支持范围匹配（如 `^1.2.0`）和强锁定。 (后端已入库 Constraint 字段)
- [ ] **完整性校验**：上传/发布资源时，自动扫描并报告缺失的依赖项。
- [x] **依赖图解析**：实现递归解析依赖图，支持获取完整依赖树 API。
- [x] **一键离线打包**：实现流式 Zip 生成，支持一键下载包含所有依赖资产的 `.simpack` 并导出清单。

---

## 2. 领域扩展：业务模块深化

- [ ] **高程地形应用 (Terrain)**
  - [ ] 实现地形切片的异步加载与 3D 预览能力。
  - [ ] 对接后端分片上传 API 处理超大体积数据。
- [ ] **通信协议 SDK 化**
  - [ ] 完善 `SimHubBridge.ts`，为第三方模块提供无缝接入的 JS SDK。
  - [ ] 增加权限透传、多语言同步、全局 Loading 拦截等功能。
- [ ] **数据可视化看板**
  - [ ] 在 Dashboard 引入图表（ECharts），展示资源类型分布、存储占用及上传动态趋势。

---

## 3. 工程化与交付

- [ ] **容器化方案**：编写多阶段构建 Dockerfile，实现“前端编译+后端编译+精简运行环境”的一键打包。
- [ ] **环境检测脚本**：建立 `healthcheck` 机制，自动检测 SQLite、MinIO 和 NATS 的连接状态。
- [ ] **全链路健康监视面板**：前端实现基础设施状态实时监控，快速定位 DB/S3/NATS/ES/Tika 的连接故障。
- [ ] **多环境适配**：将 `local.yaml` 的关键配置（端口、密钥）支持通过环境变量动态覆盖。

---

## 4. 深度架构预研

- [ ] **性能优化**：对于大规模依赖图，研究基于内存的 DAG（有向无环图）缓存计算逻辑。
- [ ] **运行时切换**：探索从 Iframe 切换到微前端渲染（如 qiankun）以消除 UI 切换时的白屏感。
